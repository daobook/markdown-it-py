
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contribute to markdown-it-py &#8212; markdown-it-py</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="markdown_it package" href="api/markdown_it.html" />
    <link rel="prev" title="Plugin extensions" href="plugins.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="zh_CN">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">markdown-it-py</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="using.html">
   使用
   <code class="docutils literal notranslate">
    <span class="pre">
     markdown_it
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="architecture.html">
   markdown-it design principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="other.html">
   Security
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="plugins.html">
   Plugin extensions
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Contribute to markdown-it-py
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="api/markdown_it.html">
   markdown_it package
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/markdown_it.cli.html">
     markdown_it.cli package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.cli.parse.html">
       markdown_it.cli.parse module
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/markdown_it.common.html">
     markdown_it.common package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.common.entities.html">
       markdown_it.common.entities module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.common.html_blocks.html">
       markdown_it.common.html_blocks module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.common.html_re.html">
       markdown_it.common.html_re module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.common.normalize_url.html">
       markdown_it.common.normalize_url module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.common.utils.html">
       markdown_it.common.utils module
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/markdown_it.helpers.html">
     markdown_it.helpers package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.helpers.parse_link_destination.html">
       markdown_it.helpers.parse_link_destination module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.helpers.parse_link_label.html">
       markdown_it.helpers.parse_link_label module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.helpers.parse_link_title.html">
       markdown_it.helpers.parse_link_title module
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/markdown_it.presets.html">
     markdown_it.presets package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.presets.commonmark.html">
       markdown_it.presets.commonmark module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.presets.default.html">
       markdown_it.presets.default module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.presets.zero.html">
       markdown_it.presets.zero module
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/markdown_it.rules_block.html">
     markdown_it.rules_block package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.blockquote.html">
       markdown_it.rules_block.blockquote module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.code.html">
       markdown_it.rules_block.code module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.fence.html">
       markdown_it.rules_block.fence module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.heading.html">
       markdown_it.rules_block.heading module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.hr.html">
       markdown_it.rules_block.hr module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.html_block.html">
       markdown_it.rules_block.html_block module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.lheading.html">
       markdown_it.rules_block.lheading module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.list.html">
       markdown_it.rules_block.list module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.paragraph.html">
       markdown_it.rules_block.paragraph module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.reference.html">
       markdown_it.rules_block.reference module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.state_block.html">
       markdown_it.rules_block.state_block module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_block.table.html">
       markdown_it.rules_block.table module
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/markdown_it.rules_core.html">
     markdown_it.rules_core package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_core.block.html">
       markdown_it.rules_core.block module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_core.inline.html">
       markdown_it.rules_core.inline module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_core.linkify.html">
       markdown_it.rules_core.linkify module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_core.normalize.html">
       markdown_it.rules_core.normalize module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_core.replacements.html">
       markdown_it.rules_core.replacements module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_core.smartquotes.html">
       markdown_it.rules_core.smartquotes module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_core.state_core.html">
       markdown_it.rules_core.state_core module
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/markdown_it.rules_inline.html">
     markdown_it.rules_inline package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.autolink.html">
       markdown_it.rules_inline.autolink module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.backticks.html">
       markdown_it.rules_inline.backticks module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.balance_pairs.html">
       markdown_it.rules_inline.balance_pairs module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.emphasis.html">
       markdown_it.rules_inline.emphasis module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.entity.html">
       markdown_it.rules_inline.entity module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.escape.html">
       markdown_it.rules_inline.escape module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.html_inline.html">
       markdown_it.rules_inline.html_inline module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.image.html">
       markdown_it.rules_inline.image module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.link.html">
       markdown_it.rules_inline.link module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.newline.html">
       markdown_it.rules_inline.newline module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.state_inline.html">
       markdown_it.rules_inline.state_inline module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.strikethrough.html">
       markdown_it.rules_inline.strikethrough module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.text.html">
       markdown_it.rules_inline.text module
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/markdown_it.rules_inline.text_collapse.html">
       markdown_it.rules_inline.text_collapse module
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.main.html">
     markdown_it.main module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.parser_block.html">
     markdown_it.parser_block module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.parser_core.html">
     markdown_it.parser_core module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.parser_inline.html">
     markdown_it.parser_inline module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.renderer.html">
     markdown_it.renderer module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.ruler.html">
     markdown_it.ruler module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.token.html">
     markdown_it.token module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.tree.html">
     markdown_it.tree module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/markdown_it.utils.html">
     markdown_it.utils module
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/contributing.md.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        
        <a class="edit-button" href="https://github.com/executablebooks/markdown-it-py/edit/master/docs/contributing.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#development-guidance">
   Development guidance
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#code-style">
   Code Style
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing">
   Testing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributing-a-plugin">
   Contributing a plugin
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#faq">
   FAQ
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#i-need-async-rule-how-to-do-it">
     I need async rule, how to do it?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-replace-part-of-text-token-with-link">
     How to replace part of text token with link?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#why-is-my-inline-rule-not-executed">
     Why is my inline rule not executed?
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="contribute-to-markdown-it-py">
<h1>Contribute to markdown-it-py<a class="headerlink" href="#contribute-to-markdown-it-py" title="永久链接至标题">¶</a></h1>
<p>We welcome all contributions! ✨</p>
<p>See the <a class="reference external" href="https://executablebooks.org/en/latest/contributing.html">EBP Contributing Guide</a> for general details, and below for guidance specific to markdown-it-py.</p>
<p>Before continuing, make sure you’ve read:</p>
<ol class="simple">
<li><p><a class="reference internal" href="architecture.html#md-architecture"><span class="std std-ref">Architecture description</span></a></p></li>
<li><p><a class="reference internal" href="other.html#md-security"><span class="std std-ref">Security considerations</span></a></p></li>
<li><p><a class="reference internal" href="api/markdown_it.html"><span class="doc std std-doc">API documentation</span></a></p></li>
</ol>
<div class="section" id="development-guidance">
<h2>Development guidance<a class="headerlink" href="#development-guidance" title="永久链接至标题">¶</a></h2>
<p>Details of the port can be found in the <code class="docutils literal notranslate"><span class="pre">markdown_it/port.yaml</span></code> and in <code class="docutils literal notranslate"><span class="pre">port.yaml</span></code> files, within the extension folders.</p>
</div>
<div class="section" id="code-style">
<h2>Code Style<a class="headerlink" href="#code-style" title="永久链接至标题">¶</a></h2>
<p>Code style is tested using <a class="reference external" href="http://flake8.pycqa.org">flake8</a>, with the configuration set in <code class="docutils literal notranslate"><span class="pre">.flake8</span></code>, and code formatted with <a class="reference external" href="https://github.com/ambv/black">black</a>.</p>
<p>Installing with <code class="docutils literal notranslate"><span class="pre">markdown-it-py[code_style]</span></code> makes the <a class="reference external" href="https://pre-commit.com/">pre-commit</a> package available, which will ensure this style is met before commits are submitted, by reformatting the code and testing for lint errors.
It can be setup by:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;&gt; <span class="nb">cd</span> markdown-it-py
&gt;&gt; pre-commit install
</pre></div>
</div>
<p>Editors like VS Code also have automatic code reformat utilities, which can adhere to this standard.</p>
<p>All functions and class methods should be annotated with types and include a docstring.
The prefered docstring format is outlined in <code class="docutils literal notranslate"><span class="pre">markdown-it-py/docstring.fmt.mustache</span></code> and can be used automatically with the <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=njpwerner.autodocstring">autodocstring</a> VS Code extension.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="永久链接至标题">¶</a></h2>
<p>For code tests, markdown-it-py uses <a class="reference external" href="https://docs.pytest.org">pytest</a>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;&gt; <span class="nb">cd</span> markdown-it-py
&gt;&gt; pytest
</pre></div>
</div>
<p>You can also use <a class="reference external" href="https://tox.readthedocs.io">tox</a>, to run the tests in multiple isolated environments (see the <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> file for available test environments):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;&gt; <span class="nb">cd</span> markdown-it-py
&gt;&gt; tox -p
</pre></div>
</div>
<p>This can also be used to run benchmarking tests using <a class="reference external" href="https://pytest-benchmark.readthedocs.io">pytest-benchmark</a>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;&gt; <span class="nb">cd</span> markdown-it-py
tox -e py38-bench-packages -- --benchmark-min-rounds <span class="m">50</span>
</pre></div>
</div>
<p>For documentation build tests:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>&gt;&gt; <span class="nb">cd</span> markdown-it-py/docs
&gt;&gt; make clean
&gt;&gt; make html-strict
</pre></div>
</div>
</div>
<div class="section" id="contributing-a-plugin">
<h2>Contributing a plugin<a class="headerlink" href="#contributing-a-plugin" title="永久链接至标题">¶</a></h2>
<ol class="simple">
<li><p>Does it already exist as JavaScript implementation (<a class="reference external" href="https://www.npmjs.com/search?q=keywords:markdown-it-plugin">see npm</a>)?
Where possible try to port directly from that.
It is usually better to modify existing code, instead of writing all from scratch.</p></li>
<li><p>Try to find the right place for your plugin rule:</p></li>
</ol>
<ul class="simple">
<li><p>Will it conflict with existing markup (by priority)?</p>
<ul>
<li><p>If yes - you need to write an inline or block rule.</p></li>
<li><p>If no - you can morph tokens within core chains.</p></li>
</ul>
</li>
<li><p>Remember that token morphing in core chains is always more simple than writing
block or inline rules, if you don’t copy existing ones. However,
block and inline rules are usually faster.</p></li>
<li><p>Sometimes, it’s enough to only modify the renderer, for example, to add
header IDs or <code class="docutils literal notranslate"><span class="pre">target=&quot;_blank&quot;</span></code> for the links.</p></li>
</ul>
</div>
<div class="section" id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="永久链接至标题">¶</a></h2>
<div class="section" id="i-need-async-rule-how-to-do-it">
<h3>I need async rule, how to do it?<a class="headerlink" href="#i-need-async-rule-how-to-do-it" title="永久链接至标题">¶</a></h3>
<p>Sorry. You can’t do it directly. All complex parsers are sync by nature. But you
can use workarounds:</p>
<ol class="simple">
<li><p>On parse phase, replace content by random number and store it in <code class="docutils literal notranslate"><span class="pre">env</span></code>.</p></li>
<li><p>Do async processing over collected data.</p></li>
<li><p>Render content and replace those random numbers with text; or replace first, then render.</p></li>
</ol>
<p>Alternatively, you can render HTML, then parse it to DOM, or
<a class="reference external" href="https://github.com/cheeriojs/cheerio">cheerio</a> AST, and apply transformations
in a more convenient way.</p>
</div>
<div class="section" id="how-to-replace-part-of-text-token-with-link">
<h3>How to replace part of text token with link?<a class="headerlink" href="#how-to-replace-part-of-text-token-with-link" title="永久链接至标题">¶</a></h3>
<p>The right sequence is to split text to several tokens and add link tokens in between.
The result will be: <code class="docutils literal notranslate"><span class="pre">text</span></code> + <code class="docutils literal notranslate"><span class="pre">link_open</span></code> + <code class="docutils literal notranslate"><span class="pre">text</span></code> + <code class="docutils literal notranslate"><span class="pre">link_close</span></code> + <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p>
<p>See implementations of <a class="reference external" href="https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/linkify.js">linkify</a> and <a class="reference external" href="https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/replace.js">emoji</a> - those do text token splits.</p>
<p><strong>Note:</strong> Don’t try to replace text with HTML markup! That’s not secure.</p>
</div>
<div class="section" id="why-is-my-inline-rule-not-executed">
<h3>Why is my inline rule not executed?<a class="headerlink" href="#why-is-my-inline-rule-not-executed" title="永久链接至标题">¶</a></h3>
<p>The inline parser skips pieces of texts to optimize speed. It stops only on <a class="reference external" href="https://github.com/markdown-it/markdown-it/blob/master/lib/rules_inline/text.js">a small set of chars</a>, which can be tokens. We did not made this list extensible for performance reasons too.</p>
<p>If you are absolutely sure that something important is missing there - create a
ticket and we will consider adding it as a new charcode.</p>
</div>
</div>
</div>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="plugins.html" title="上一页 页">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">上一页</p>
            <p class="prev-next-title">Plugin extensions</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="api/markdown_it.html" title="下一页 页">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">下一页</p>
        <p class="prev-next-title">markdown_it package</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By executable book project<br/>
        
            &copy; Copyright 2020, executable book project.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>